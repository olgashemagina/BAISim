# Используемые датасеты

BAISim может быть использован с разными датасетами, при условии подготовки их в поддерживаемом формате. Папка `dataset` в корне репозитория является базовой для хранения датасетов. Ниже приведены краткое описание и ссылки на подготовленные датасеты, которые могут быть распакованы в папку для последующей с ними работы.

- **Face_Test:** тестовый датасет, содержащий экспортированные фрагменты лиц для демонстрации возможностей обучения детекторов.
  - [Ссылка на Face_Test](https://www.kaggle.com/datasets/nuidelirina/face-test)
  - [Лицензия](https://opendatacommons.org/licenses/dbcl/1-0/)

- **Face_Test_100images:** субдатасет из 100 фрагментов датасета Face_Test. Демонстрирует возможности построения детектора по 100 примерам.
  - [Ссылка на Face_Test_100images](https://www.kaggle.com/datasets/nuidelirina/face-test-100images)
  - [Лицензия](https://opendatacommons.org/licenses/dbcl/1-0/)

- **Background:** датасет негативных примеров, необходимый для построения детекторов.
  - [Ссылка на Background](https://www.kaggle.com/datasets/nuidelirina/background)
  - [Лицензия](https://opendatacommons.org/licenses/dbcl/1-0/)

- **Railway_rtank_test:** датасет изображений цистерн с разметкой. Демонстрирует возможности построения агентов с корректорами и их тестирование.
  - [Ссылка на Railway_rtank_test](https://kaggle.com/datasets/3266611f5a350adf9309967982d67b51a9a3027449ef524ec1e2c8833143a1a4)
  - [Лицензия](https://cdla.dev/permissive-1-0/)

- **Railway:** датасет с данными, относящимися к различным объектам железной дороги (номера на железнодорожных вагонах, цифры от 0 до 9 с номеров вагонов, железнодорожный состав из нескольких вагонов, товарный вагон, цистерна).
  - [Ссылка на Railway](https://kaggle.com/datasets/fbfe48ad425a0d4ef55a30aaf5f5997fca2d8d34b43cba94943ce4a88c3e3026)
  - [Лицензия](https://cdla.dev/permissive-1-0/)

- **Road types:** датасет с дорогами трех типов: дороги с асфальтовым покрытием, дороги с грунтовым покрытием, заснеженные дороги.
  - [Ссылка на Road types](https://www.kaggle.com/datasets/nuidelirina/road-types)
  - [Лицензия](https://opendatacommons.org/licenses/dbcl/1-0/)

- **Landing Pad:** датасет с изображениями двух типов посадочных платформ для беспилотного летательного аппарата вертолетного типа: площадка в виде буквы «Н», традиционно используемая; посадочная площадка, предложенная разработчиками, изображение которой инвариантно к повороту.
  - [Ссылка на Landing Pad](https://www.kaggle.com/datasets/nuidelirina/landing-pad)
  - [Лицензия](https://opendatacommons.org/licenses/dbcl/1-0/)

- **Face recognition:** датасет с изображениями лиц.
  - [Ссылка на Face recognition](https://www.kaggle.com/datasets/nuidelirina/face-recognition)
  - [Лицензия](https://opendatacommons.org/licenses/dbcl/1-0/)

---

Во всех датасетах, кроме `Face`, `Face_100` и `Railway_rtank_test` содержатся каталоги `correct`, `test`, `train` (внутри которого находится каталог `dbexport` с экспортированными фрагментами для построения детектора). Изображения и одноименные файлы в формате XML (разметка) находятся в одной папке. Изображения в форматах jpg или awp, поддерживаемые BAISim. Файл разметки содержит информацию о размеченных объектах.

## Формат данных

Супервизор ожидает, что в папке датасета изображения и файлы разметки организованы определенным образом. Для каждого изображения в той же папке и с тем же именем должен располагаться XML-файл с координатами объектов. Ниже приведен формат файла разметки:

```xml
<?xml version="1.0" ?>
<TLFSemanticImageDescriptor ImageWidth="640" ImageHeight="640">
  <TLFDetectedItem DetectorName="Human marked" Raiting="0" Type="741be8a0-0538-40ff-8be3-b0023aa14c65" zoneType="1" Angle="0" Racurs="0" left="0" top="0" right="93" bottom="127" Comment="" />
</TLFSemanticImageDescriptor>
```

Блок `TLFSemanticImageDescriptor` содержит информацию о размерах изображения, а также информацию обо всех размеченных объектах в блоках `TLFDetectedItem`.

Количество блоков `TLFDetectedItem` соответствует количеству размеченных объектов на изображении. Каждый блок содержит информацию о:
- источнике разметки – ручная или автоматическая при помощи детектора.
- поле `Raiting` заполняется в случае автоматической разметки и соответствует уровню уверенности детектора при обнаружении объекта.
- поле `Type` представляет собой UUID типа размеченного объекта.
- поле `zoneType` представляет собой код типа разметки – прямоугольник, многоугольник и т.д.
- поля `Angle` и `Racurs` – дополнительные свойства размеченного объекта, могут выставляться при ручной разметке и использоваться для фильтрации изображений.
- поля `left`, `top`, `right`, `bottom` задают размеры прямоугольника, ограничивающего область разметки.

В случае ручной разметки при помощи Image Marker файл разметки формируется автоматически при выделении объекта на изображении (подробнее описано в инструкции к [Image Marker](https://github.com/olgashemagina/BAISim/tree/main/Documentation/IM_pr_description_user_manual.docx)).

